<!DOCTYPE html>
<html lang="en">
<head>
	<title>Login_Couchsurfing</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
<!--===============================================================================================-->	
	<link rel="icon" type="image/png" href="images/favicon.ico"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/iconic/css/material-design-iconic-font.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
<!--===============================================================================================-->	
	<link rel="stylesheet" type="text/css" href="vendor/css-hamburgers/hamburgers.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animsition/css/animsition.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
<!--===============================================================================================-->	
	<link rel="stylesheet" type="text/css" href="vendor/daterangepicker/daterangepicker.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="css/util.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
<!--===============================================================================================-->
<link rel="stylesheet" href="/components/spinner/spinner.css">
</head>
<body onload="myFunction()" style="margin:0;">
	<div id="loader"></div>
	<div class="limiter" id="myDiv">
		<div class="container-login100" style="background-image: url('images/bg-01.jpg');">
			<div class="wrap-login100 p-l-55 p-r-55 p-t-65 p-b-54">
				<!-- <form class="login100-form validate-form"> -->
					<span class="login100-form-title p-b-49">
						Login
					</span>

					<div class="wrap-input100 validate-input m-b-23" data-validate = "Username is reauired">
						<span class="label-input100">Email</span>
						<input class="input100" type="text" name="username" placeholder="Type your email" id="email">
						<span class="focus-input100" data-symbol="&#xf206;"></span>
						<div class="error"></div>
					</div>

					<div class="wrap-input100 validate-input" data-validate="Password is required">
						<span class="label-input100">Password</span>
						<input class="input100" type="password" name="pass" placeholder="Type your password" id="password">
						<span class="focus-input100" data-symbol="&#xf190;"></span>
						<div class="error"></div>
					</div>
					
					<div class="text-right p-t-8 p-b-31">
						<a href="#">
							Forgot password?
						</a>
					</div>
					
					<div class="container-login100-form-btn d-flex">
						<div class="wrap-login100-form-btn">
							<div class="login100-form-bgbtn"></div>
							<button type="submit" class="login100-form-btn" id="signIn" value="Sign Up">SignIn</button>
						</div>
					</div><br/>
					<p class="text-center text-muted mt-5 mb-0">Still don't have an account? <a href="signup.html" class="fw-bold text-body"><u>Register here</u></a></p>

					<p class="text-center text-muted mt-5 mb-0">Back to <a href="/index.html" class="fw-bold text-body"><u>Home Page</u></a></p>
			</div>
			
			</div>
	</div>

	<!-- <script src="main.js"></script> -->
	<script src="/components/spinner/spinner.js"></script>

	<script type="module">

 // Import the functions you need from the SDKs you need
 import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.9/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.9/firebase-analytics.js";
  import { getAuth, createUserWithEmailAndPassword,onAuthStateChanged ,signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.6.9/firebase-auth.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyAvXpflDNxUr1OHB_9PxDzy2uextSLhEQQ",
    authDomain: "couchsurfing-india.firebaseapp.com",
    projectId: "couchsurfing-india",
    storageBucket: "couchsurfing-india.appspot.com",
    messagingSenderId: "88507130235",
    appId: "1:88507130235:web:7a40e25536f67646f49dde",
    measurementId: "G-P1EV7PJYNK"
  };
  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const auth = getAuth();


signIn.addEventListener('click',(e)=>{

	var email = document.getElementById('email').value;
	var password = document.getElementById('password').value;

	if(email==''){
	alert('Email is required');
	}else if(password==''){
		alert('Password is required');
	}
	else{
		signInWithEmailAndPassword(auth, email, password)
	.then((userCredential) => {
		// Signed in 
		const user = userCredential.user;
		
	})
	.catch((error) => {
		const errorCode = error.code;
		const errorMessage = error.message;
		
		alert(errorMessage);
	})
	}
})

onAuthStateChanged(auth, (user) => {
  if (user) {
    // User is signed in, see docs for a list of available properties
    // https://firebase.google.com/docs/reference/js/firebase.User
    const uid = user.uid;
    // ...
		window.location.href="/MyProfile/myprofile.html";
  } else {
    // User is signed out
    // ...
  }
});

	</script>
</body>
</html>